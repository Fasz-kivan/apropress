!function(t){"use strict";function n(){const s=t(".rtcl-chat-unread-count");0!==s.length&&t.ajax({url:rtcl.ajaxurl,method:"GET",data:{action:"rtcl_chat_ajax_get_unread_message_num"},success:function(n){s.find(".rtcl-unread-badge").remove();const e=parseInt(n,10)||0;if(e){const n=t('<span class="rtcl-unread-badge"></span>');n.text(e),s.append(n)}},complete:function(){setTimeout(n,5e3)}})}function s(){const n=t(".rtcl-user-status");t.ajax({url:rtcl.ajaxurl,method:"POST",data:{listing_id:rtcl.post_id,action:"rtcl_update_user_online_status"},success:function(t){rtcl.post_id&&(t.success?(n.removeClass("offline").addClass("online"),n.find("span").text(rtcl.online_status_online_text)):(n.removeClass("online").addClass("offline"),n.find("span").text(rtcl.online_status_offline_text)))}})}t((function(){n(),rtcl.online_status_seconds&&(s(),setInterval((function(){s()}),1e3*parseInt(rtcl.online_status_seconds,10)))}))}(jQuery);
